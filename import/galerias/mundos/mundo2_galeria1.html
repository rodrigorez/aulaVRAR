<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mundo J84 - Zonas 11</title>
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
    #ui {
      position: fixed;
      bottom: 20px;
      width: 100%;
      text-align: center;
      color: white;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      z-index: 999;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="ui">üåê Clique na imagem para ver a obra ‚Äî ou na esfera para voltar √† AR!</div>

  <a-scene
    cursor="rayOrigin: mouse"
    vr-mode-ui="enabled: true"
  >
    <!-- üñºÔ∏è FUNDO 360¬∞ -->
    <a-sky src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg"></a-sky>

    <!-- üî¥ Esfera para voltar √† AR -->
    <a-sphere
      class="clickable-back"
      position="-2 1.5 -3"
      radius="0.4"
      color="#FF5252"
      animation="property: position; to: -2 1.7 -3; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"
    >
      <a-entity
        position="0 0.6 0"
        text="value: ‚Ü©Ô∏è\nVOLTAR AR; align: center; color: white; width: 3"
        scale="1.2 1.2 1.2"
      ></a-entity>
    </a-sphere>

    <!-- üñºÔ∏è IMAGEM CLIC√ÅVEL -->
    <a-plane
      class="clickable-image"
      position="2 1.5 -3"
      width="1.5"
      height="1"
      rotation="0 0 0"
      animation="property: position; to: 2 1.7 -3; dur: 1200; easing: easeInOutQuad; loop: true; dir: alternate"
      material="src: url({{iconeObra}}); side: double;"
    ></a-plane>

    <a-entity
      position="2 0.8 -3"
      text="value: üé¨\nAssista a obra; align: center; color: white; width: 3"
      scale="1.2 1.2 1.2"
    ></a-entity>

    <!-- üëÅÔ∏è C√¢mera -->
    <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>
  </a-scene>

  <script>
    AFRAME.registerComponent('redirect-on-click', {
      schema: { url: { type: 'string', default: '#' } },
      init: function () {
        const el = this.el;
        const url = this.data.url;

        el.addEventListener('click', () => {
          el.setAttribute('scale', '1.2 1.2 1.2');
          setTimeout(() => {
            window.location.href = url;
          }, 300);
        });
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      const sphere = document.querySelector('.clickable-back');
      if (sphere) {
        sphere.setAttribute('redirect-on-click', {
          url: 'https://rodrigorez.github.io/aulaVRAR/import/galerias/galeria1.html'
        });
      }

      const image = document.querySelector('.clickable-image');
      if (image) {
        image.setAttribute('redirect-on-click', {
          url: '{{urlObra}}'
        });
      }
    });
  </script>
</body>
</html>